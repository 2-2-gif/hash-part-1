import { ApolloError } from "apollo-server-express";

import { QueryPageArgs, Resolver } from "../../autoGeneratedTypes";
import { pages } from "../../../mockData/pages";
import { DbPage } from "../../../types/dbTypes";

export const page: Resolver<DbPage, {}, {}, QueryPageArgs> = (_, { id }) => {
  const dbPage = pages.find((page) => page.id === id);

  if (!dbPage) {
    throw new ApolloError(`Page id ${id} not found`, "NOT_FOUND");
  }

  return dbPage;
};
