import { GraphQLClient } from "graphql-request";

import {
  CreateEntityMutation,
  CreateEntityMutationVariables,
  CreateOrgMutation,
  CreateOrgMutationVariables,
  CreatePageMutation,
  CreatePageMutationVariables,
  CreateUserMutation,
  CreateUserMutationVariables,
} from "../graphql/autoGeneratedTypes";
import { createEntity } from "../../../frontend/src/graphql/queries/entity.queries";
import { createUser } from "../../../frontend/src/graphql/queries/user.queries";
import { createOrg } from "../../../frontend/src/graphql/queries/org.queries";
import { createPage } from "../../../frontend/src/graphql/queries/page.queries";

export class ApiClient {
  private client: GraphQLClient;

  constructor(url: string) {
    this.client = new GraphQLClient(url);
  }

  async createEntity(vars: CreateEntityMutationVariables) {
    return await (
      await this.client.request<
        CreateEntityMutation,
        CreateEntityMutationVariables
      >(createEntity, vars)
    ).createEntity;
  }

  async createUser(vars: CreateUserMutationVariables) {
    return await (
      await this.client.request<
        CreateUserMutation,
        CreateUserMutationVariables
      >(createUser, vars)
    ).createUser;
  }

  async createOrg(vars: CreateOrgMutationVariables) {
    return await (
      await this.client.request<CreateOrgMutation, CreateOrgMutationVariables>(
        createOrg,
        vars
      )
    ).createOrg;
  }

  async createPage(vars: CreatePageMutationVariables) {
    return await (
      await this.client.request<
        CreatePageMutation,
        CreatePageMutationVariables
      >(createPage, vars)
    ).createPage;
  }
}
